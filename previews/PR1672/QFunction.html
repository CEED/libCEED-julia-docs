<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>QFunction · LibCEED.jl Docs</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">LibCEED.jl Docs</span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li><span class="tocitem">Ceed Objects</span><ul><li><a class="tocitem" href="Ceed.html">Ceed</a></li><li><a class="tocitem" href="CeedVector.html">CeedVector</a></li><li><a class="tocitem" href="ElemRestriction.html">ElemRestriction</a></li><li><a class="tocitem" href="Basis.html">Basis</a></li><li class="is-active"><a class="tocitem" href="QFunction.html">QFunction</a></li><li><a class="tocitem" href="Operator.html">Operator</a></li></ul></li><li><span class="tocitem">Utilities</span><ul><li><a class="tocitem" href="Misc.html">Linear Algebra</a></li><li><a class="tocitem" href="Globals.html">Constants and Enumerations</a></li><li><a class="tocitem" href="Quadrature.html">Quadrature</a></li></ul></li><li><a class="tocitem" href="LibCEED.html">Library configuration</a></li><li><a class="tocitem" href="C.html">Low-level C interface</a></li><li><a class="tocitem" href="UserQFunctions.html">Defining User Q-Functions</a></li><li><a class="tocitem" href="Examples.html">Examples</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Ceed Objects</a></li><li class="is-active"><a href="QFunction.html">QFunction</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="QFunction.html">QFunction</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/CEED/libCEED/blob/master/julia/LibCEED.jl/docs/src/QFunction.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="QFunction"><a class="docs-heading-anchor" href="#QFunction">QFunction</a><a id="QFunction-1"></a><a class="docs-heading-anchor-permalink" href="#QFunction" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-binding" id="LibCEED.QFunction" href="#LibCEED.QFunction"><code>LibCEED.QFunction</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">QFunction</code></pre><p>A libCEED <code>CeedQFunction</code> object, typically created using the <a href="QFunction.html#LibCEED.@interior_qf"><code>@interior_qf</code></a> macro.</p><p>A <code>QFunction</code> can also be created from the &quot;Q-function gallery&quot; using <a href="QFunction.html#LibCEED.create_interior_qfunction-Tuple{Ceed, AbstractString}"><code>create_interior_qfunction</code></a>. The identity Q-function can be created using <a href="QFunction.html#LibCEED.create_identity_qfunction"><code>create_identity_qfunction</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CEED/libCEED/blob/02e4174b3e8231a233a22c32b31b78e1664fbbc0/julia/LibCEED.jl/src/QFunction.jl#L6-L14">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="LibCEED.@interior_qf" href="#LibCEED.@interior_qf"><code>LibCEED.@interior_qf</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia">@interior_qf name=def</code></pre><p>Creates a user-defined interior (volumetric) Q-function, and assigns it to a variable named <code>name</code>. The definition of the Q-function is given as:</p><pre><code class="language-none">@interior_qf user_qf=(
    ceed::CEED,
    [const1=val1, const2=val2, ...],
    [ctx::ContextType],
    (I1, :in, EvalMode, dims...),
    (I2, :in, EvalMode, dims...),
    (O1, :out, EvalMode, dims...),
    body
)</code></pre><p>The definitions of form <code>const=val</code> are used for definitions which will be compile-time constants in the Q-function. For example, if <code>dim</code> is a variable set to the dimension of the problem, then <code>dim=dim</code> will make <code>dim</code> available in the body of the Q-function as a compile-time constant.</p><p>If the user wants to provide a context struct to the Q-function, that can be achieved by optionally including <code>ctx::ContextType</code>, where <code>ContextType</code> is the type of the context struct, and <code>ctx</code> is the name to which is will be bound in the body of the Q-function.</p><p>This is followed by the definition of the input and output arrays, which take the form <code>(arr_name, (:in|:out), EvalMode, dims...)</code>. Each array will be bound to a variable named <code>arr_name</code>. Input arrays should be tagged with :in, and output arrays with :out. An <code>EvalMode</code> should be specified, followed by the dimensions of the array. If the array consists of scalars (one number per Q-point) then <code>dims</code> should be omitted.</p><p><strong>Examples</strong></p><ul><li>Q-function to compute the &quot;Q-data&quot; for the mass operator, which is given by the quadrature weight times the Jacobian determinant. The mesh Jacobian (the gradient of the nodal mesh points) and the quadrature weights are given as input arrays, and the Q-data is the output array. <code>dim</code> is given as a compile-time constant, and so the array <code>J</code> is statically sized, and therefore <code>det(J)</code> will automatically dispatch to an optimized implementation for the given dimension.</li></ul><pre><code class="language-none">@interior_qf build_qfunc = (
    ceed, dim=dim,
    (J, :in, EVAL_GRAD, dim, dim),
    (w, :in, EVAL_WEIGHT),
    (qdata, :out, EVAL_NONE),
    qdata[] = w*det(J)
)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CEED/libCEED/blob/02e4174b3e8231a233a22c32b31b78e1664fbbc0/julia/LibCEED.jl/src/UserQFunction.jl#L191-L239">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="LibCEED.create_interior_qfunction-Tuple{Ceed, AbstractString}" href="#LibCEED.create_interior_qfunction-Tuple{Ceed, AbstractString}"><code>LibCEED.create_interior_qfunction</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">create_interior_qfunction(ceed::Ceed, name::AbstractString)</code></pre><p>Create a <a href="QFunction.html#LibCEED.QFunction"><code>QFunction</code></a> from the Q-function gallery, using the provided name.</p><p><strong>Examples</strong></p><ul><li>Build and apply the 3D mass operator</li></ul><pre><code class="language-none">build_mass_qf = create_interior_qfunction(c, &quot;Mass3DBuild&quot;)
apply_mass_qf = create_interior_qfunction(c, &quot;MassApply&quot;)</code></pre><ul><li>Build and apply the 3D Poisson operator</li></ul><pre><code class="language-none">build_poi_qf = create_interior_qfunction(c, &quot;Poisson3DBuild&quot;)
apply_poi_qf = create_interior_qfunction(c, &quot;Poisson3DApply&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CEED/libCEED/blob/02e4174b3e8231a233a22c32b31b78e1664fbbc0/julia/LibCEED.jl/src/QFunction.jl#L54-L71">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="LibCEED.create_identity_qfunction" href="#LibCEED.create_identity_qfunction"><code>LibCEED.create_identity_qfunction</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">create_identity_qfunction(c::Ceed, size, inmode::EvalMode, outmode::EvalMode)</code></pre><p>Create an identity <a href="QFunction.html#LibCEED.QFunction"><code>QFunction</code></a>. Inputs are written into outputs in the order given. This is useful for <a href="Operator.html#Operator"><code>Operators</code></a> that can be represented with only the action of a <a href="ElemRestriction.html#LibCEED.ElemRestriction"><code>ElemRestriction</code></a> and <a href="Basis.html#LibCEED.Basis"><code>Basis</code></a>, such as restriction and prolongation operators for p-multigrid. Backends may optimize <code>CeedOperators</code> with this Q-function to avoid the copy of input data to output fields by using the same memory location for both.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CEED/libCEED/blob/02e4174b3e8231a233a22c32b31b78e1664fbbc0/julia/LibCEED.jl/src/QFunction.jl#L78-L86">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="LibCEED.set_context!" href="#LibCEED.set_context!"><code>LibCEED.set_context!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">set_context!(qf::QFunction, ctx::Context)</code></pre><p>Associate a <a href="Context.html#LibCEED.Context"><code>Context</code></a> object <code>ctx</code> with the given Q-function <code>qf</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CEED/libCEED/blob/02e4174b3e8231a233a22c32b31b78e1664fbbc0/julia/LibCEED.jl/src/QFunction.jl#L101-L105">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="LibCEED.apply!-Tuple{QFunction, Any, Any, Any}" href="#LibCEED.apply!-Tuple{QFunction, Any, Any, Any}"><code>LibCEED.apply!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">apply!(qf::QFunction, Q, vin, vout)</code></pre><p>Apply the action of a <a href="QFunction.html#LibCEED.QFunction"><code>QFunction</code></a> to an array of input vectors, and store the result in an array of output vectors.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CEED/libCEED/blob/02e4174b3e8231a233a22c32b31b78e1664fbbc0/julia/LibCEED.jl/src/QFunction.jl#L135-L140">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="Basis.html">« Basis</a><a class="docs-footer-nextpage" href="Operator.html">Operator »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 23 September 2024 17:49">Monday 23 September 2024</span>. Using Julia version 1.10.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
